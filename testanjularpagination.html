<!DOCTYPE HTML>
<html lang="en" ng-app="myApp">

<head>
    <meta charset="utf-8">
    <title>Dynamic Pagination w/ Filtering</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Kim Maida">
    <!-- JS Libraries -->
    <script src="js/angular.min.js" type="text/javascript"></script>
    <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.10.0.js" type="text/javascript"></script>
    <!-- Angular Scripts -->
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <script>
    var app = angular.module('myApp', ['ui.bootstrap']);


    app.filter('startFrom', function() {
        return function(input, start) {
            if (input) {
                start = +start;
                return input.slice(start);
            }
            return [];
        };
    });

    app.controller('PageCtrl', ['$scope', 'filterFilter', function($scope, filterFilter) {
        $scope.items = [{
            itemTitle: "幼师口袋",
            headCount: "5人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "阿里云计划",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "去哪儿携程",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "福特终端系统",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "辣妹狂拍",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "福特终端系统",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "福特终端系统",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }, {
            itemTitle: "福特终端系统",
            headCount: "4人",
            timeLength: "2个月",
            itemLongtext: "幼师口袋是一个专注面向幼儿园老师群体的媒体和社区，通过微信公众号提供幼儿园区角布置、教具玩具制作等实用信息。"
        }];

        // create empty search model (object) to trigger $watch on update
        $scope.search = {};

        $scope.resetFilters = function() {
            // needs to be a function or it won't trigger a $watch
            $scope.search = {};
        };

        // pagination controls
        $scope.currentPage = 1;
        $scope.totalItems = $scope.items.length;
        $scope.entryLimit = 2; // items per page
        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.entryLimit);

        // $watch search to update pagination
        $scope.$watch('search', function(newVal, oldVal) {
            $scope.filtered = filterFilter($scope.items, newVal);
            $scope.totalItems = $scope.filtered.length;
            $scope.noOfPages = Math.ceil($scope.totalItems / $scope.entryLimit);
            $scope.currentPage = 1;
        }, true);
    }]);
    </script>
</head>

<body>
    <div ng-app="myApp" ng-controller="PageCtrl" class="items">
        <div class="item" ng-repeat="itemline in filtered = items | filter:search | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">
            <img class="img-responsive itemimg" src="img/design1.png" alt="">
            <div class="itemdesc">
                <p class="itemtitle">{{itemline.itemTitle}}</p>
                <p class="itemtext"><span>项目需求人数:</span><span>{{itemline.headCount}} &nbsp | &nbsp</span>
                    <span>项目周期:</span><span>{{itemline.timeLength}}</span></p>
                <p class="itemtext"><span>{{itemline.itemLongtext}}</span></p>
            </div>
            <hr>
        </div>
        <pagination page="currentPage" max-size="noOfPages" total-items="totalItems" items-per-page="entryLimit"></pagination>
    </div>
</body>

</html>
